<!--index.wxml - È¶ñÈ°µÊ®°Êùø-->
<navigation-bar title="‰∏≠ÂåªËçØÊùêÂïÜÂüé" back="{{false}}" color="black" background="#FFF"></navigation-bar>

<scroll-view class="page-container" scroll-y type="list">
  <!-- ÂìÅÁâåÂ§¥ÈÉ®Âå∫Âüü -->
  <view class="brand-header">
    <image 
      class="brand-bg-image" 
      src="{{brandInfo.backgroundImage}}" 
      mode="aspectFill"
      lazy-load="{{true}}"
      binderror="onImageError"
    ></image>
    <view class="brand-content">
      <view class="brand-logo-container">
        <image 
          class="brand-logo" 
          src="{{brandInfo.logo}}" 
          mode="aspectFit"
          lazy-load="{{true}}"
          binderror="onImageError"
        ></image>
      </view>
      <view class="brand-slogan">{{brandInfo.slogan}}</view>
    </view>
    <view class="brand-overlay"></view>
  </view>

  <!-- ‰∏ªÊ®™ÂπÖÂπøÂëäÂå∫Âüü -->
  <view class="main-banner" bindtap="onMainBannerTap">
    <image 
      class="banner-bg-image" 
      src="{{mainBanner.backgroundImage}}" 
      mode="aspectFill"
      lazy-load="{{true}}"
      binderror="onImageError"
    ></image>
    <view class="banner-overlay"></view>
    <view class="banner-content">
      <view class="banner-title">{{mainBanner.title}}</view>
      <view class="banner-subtitle">{{mainBanner.subtitle}}</view>
      <view class="banner-audio-btn" wx:if="{{mainBanner.audioUrl}}">
        <view class="audio-icon">üîä</view>
        <text class="audio-text">ÁÇπÂáªÊí≠ÊîæËØ≠Èü≥‰ªãÁªç</text>
      </view>
    </view>
  </view>

  <!-- ÊêúÁ¥¢Ê†èÂå∫Âüü -->
  <view class="search-section">
    <view class="search-container">
      <view class="search-bar" bindtap="onSearchFocus">
        <view class="search-icon">
          <text class="search-icon-text">üîç</text>
        </view>
        <input 
          class="search-input" 
          placeholder="{{searchConfig.placeholder}}" 
          placeholder-class="search-placeholder"
          value="{{searchKeyword}}"
          bindinput="onSearchInput"
          bindconfirm="onSearchConfirm"
          bindfocus="onSearchInputFocus"
          bindblur="onSearchInputBlur"
          confirm-type="search"
          disabled="{{searchDisabled}}"
        />
        <view class="search-clear" wx:if="{{searchKeyword}}" bindtap="onSearchClear">
          <text class="clear-icon">√ó</text>
        </view>
      </view>
      
      <!-- ÁÉ≠Èó®ÊêúÁ¥¢ÂÖ≥ÈîÆËØç -->
      <view class="hot-keywords" wx:if="{{showHotKeywords && searchConfig.hotKeywords.length > 0}}">
        <view class="hot-keywords-title">ÁÉ≠Èó®ÊêúÁ¥¢</view>
        <view class="keywords-list">
          <text 
            class="keyword-item" 
            wx:for="{{searchConfig.hotKeywords}}" 
            wx:key="index"
            data-keyword="{{item}}"
            bindtap="onHotKeywordTap"
          >{{item}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- Âø´Êç∑ÂäüËÉΩÂå∫Âüü -->
  <view class="quick-actions">
    <view class="quick-actions-container">
      <view 
        class="quick-action-item" 
        wx:for="{{quickActions}}" 
        wx:key="id"
        data-id="{{item.id}}"
        data-path="{{item.path}}"
        bindtap="onQuickActionTap"
      >
        <view class="action-icon-container">
          <image 
            class="action-icon" 
            src="{{item.icon}}" 
            mode="aspectFit"
            lazy-load="{{true}}"
            binderror="onImageError"
          ></image>
        </view>
        <view class="action-title">{{item.title}}</view>
      </view>
    </view>
  </view>

  <!-- ÂïÜÂìÅÂàÜÁ±ªÂ±ïÁ§∫Âå∫Âüü -->
  <view class="category-grid">
    <view class="category-grid-container">
      <!-- Â∑¶‰æßÂ§ßÂç°ÁâáÂå∫Âüü -->
      <view class="category-left">
        <!-- ÊÉ†Ê∞ë‰∏ìÂå∫Âç°Áâá -->
        <view 
          class="category-card category-welfare" 
          data-id="{{categories[0].id}}"
          data-path="{{categories[0].path}}"
          bindtap="onCategoryTap"
        >
          <image 
            class="category-bg-image" 
            src="{{categories[0].backgroundImage}}" 
            mode="aspectFill"
            lazy-load="{{true}}"
            binderror="onImageError"
          ></image>
          <view class="category-overlay"></view>
          <view class="category-content">
            <view class="category-header">
              <view class="category-title">{{categories[0].title}}</view>
              <view class="category-subtitle">{{categories[0].subtitle}}</view>
            </view>
            <view class="category-footer">
              <view class="category-products" wx:if="{{categories[0].products.length > 0}}">
                <image 
                  class="product-preview" 
                  wx:for="{{categories[0].products}}" 
                  wx:key="id"
                  wx:if="{{index < 3}}"
                  src="{{item.image}}" 
                  mode="aspectFill"
                  lazy-load="{{true}}"
                ></image>
              </view>
              <view class="category-action-btn">
                <text class="action-text">{{categories[0].actionText}}</text>
              </view>
            </view>
          </view>
        </view>

        <!-- ÂìÅË¥®Ëá™Ëê•Âç°Áâá -->
        <view 
          class="category-card category-quality" 
          data-id="{{categories[1].id}}"
          data-path="{{categories[1].path}}"
          bindtap="onCategoryTap"
        >
          <image 
            class="category-bg-image" 
            src="{{categories[1].backgroundImage}}" 
            mode="aspectFill"
            lazy-load="{{true}}"
            binderror="onImageError"
          ></image>
          <view class="category-overlay"></view>
          <view class="category-content">
            <view class="category-header">
              <view class="category-title">{{categories[1].title}}</view>
              <view class="category-subtitle">{{categories[1].subtitle}}</view>
            </view>
            <view class="category-footer">
              <view class="category-products" wx:if="{{categories[1].products.length > 0}}">
                <image 
                  class="product-preview" 
                  wx:for="{{categories[1].products}}" 
                  wx:key="id"
                  wx:if="{{index < 3}}"
                  src="{{item.image}}" 
                  mode="aspectFill"
                  lazy-load="{{true}}"
                ></image>
              </view>
              <view class="category-action-btn">
                <text class="action-text">{{categories[1].actionText}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- Âè≥‰æßÂ∞èÂç°ÁâáÂå∫Âüü -->
      <view class="category-right">
        <!-- ÁàÜÊ¨æËå∂È•ÆÂç°Áâá -->
        <view 
          class="category-card category-tea" 
          data-id="{{categories[2].id}}"
          data-path="{{categories[2].path}}"
          bindtap="onCategoryTap"
        >
          <image 
            class="category-bg-image" 
            src="{{categories[2].backgroundImage}}" 
            mode="aspectFill"
            lazy-load="{{true}}"
            binderror="onImageError"
          ></image>
          <view class="category-overlay"></view>
          <view class="category-content">
            <view class="category-header">
              <view class="category-title">{{categories[2].title}}</view>
              <view class="category-subtitle">{{categories[2].subtitle}}</view>
            </view>
            <view class="category-footer">
              <view class="category-products" wx:if="{{categories[2].products.length > 0}}">
                <image 
                  class="product-preview" 
                  wx:for="{{categories[2].products}}" 
                  wx:key="id"
                  wx:if="{{index < 2}}"
                  src="{{item.image}}" 
                  mode="aspectFill"
                  lazy-load="{{true}}"
                ></image>
              </view>
              <view class="category-action-btn">
                <text class="action-text">{{categories[2].actionText}}</text>
              </view>
            </view>
          </view>
        </view>

        <!-- Ê¥ªÂä®‰∏ìÂå∫Âç°Áâá -->
        <view 
          class="category-card category-activity" 
          data-id="{{categories[3].id}}"
          data-path="{{categories[3].path}}"
          bindtap="onCategoryTap"
        >
          <image 
            class="category-bg-image" 
            src="{{categories[3].backgroundImage}}" 
            mode="aspectFill"
            lazy-load="{{true}}"
            binderror="onImageError"
          ></image>
          <view class="category-overlay"></view>
          <view class="category-content">
            <view class="category-header">
              <view class="category-title">{{categories[3].title}}</view>
              <view class="category-subtitle">{{categories[3].subtitle}}</view>
            </view>
            <view class="category-footer">
              <view class="category-products" wx:if="{{categories[3].products.length > 0}}">
                <image 
                  class="product-preview" 
                  wx:for="{{categories[3].products}}" 
                  wx:key="id"
                  wx:if="{{index < 2}}"
                  src="{{item.image}}" 
                  mode="aspectFill"
                  lazy-load="{{true}}"
                ></image>
              </view>
              <view class="category-action-btn">
                <text class="action-text">{{categories[3].actionText}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- Â∫ïÈÉ®ÂÆâÂÖ®Âå∫Âüü -->
  <view class="safe-area-bottom"></view>
</scroll-view>
